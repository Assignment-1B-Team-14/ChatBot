matrix:
  include:
    - language: java
      sudo: required
      jdk: oraclejdk8
      before_script:
        - cd code/backend
      script:
        - sudo chmod +x mvnw
        - ./mvnw test
        - ./mvnw install

    - language: node_js
      sudo: required
      node_js:
      - "node"
      - "8"
      before_script:
        - cd code/frontend/web
      script:
        - npm install
        - npm test
        - npm run build

    - language: android
        sudo: required
        before_script:
          - cd code/frontend/mobile
        before_install:
          - nvm install 6
          - node --version
        install:
          -  npm install
        android:
          components:
            - build-tools-23.0.1
            - android-23
            - extra-android-m2repository
            - extra-google-google_play_services
            - extra-google-m2repository
            - addon-google_apis-google-16
        script:
          - cd android && ./gradlew assembleRelease
          - dir

cache:
  directories:
  - .autoconf
  - $HOME/.m2
  - node_modules

notifications:
  email:
    - florian.widder@live.de
